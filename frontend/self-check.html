<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ì„¸ì´í”„í™ˆ - ìê°€ì§„ë‹¨ ì²´í¬ë¦¬ìŠ¤íŠ¸</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* íˆì–´ë¡œ */
    .check-hero{
      background: linear-gradient(135deg, #1976d2 0%, #64b5f6 100%);
      color:#fff; text-align:center; padding:48px 16px 32px;
    }
    .check-hero h1{ margin:0 0 8px; font-size:2rem; }
    .check-hero p{ margin:0; opacity:.95; }

    /* ì§„í–‰ë°” */
    .progress-bar{
      max-width:680px; margin:24px auto 0; height:8px; background:rgba(255,255,255,.3);
      border-radius:999px; overflow:hidden;
    }
    .progress-fill{
      height:100%; background:#fff; width:0%; transition:width .3s ease;
    }

    /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
    .check-main{ max-width:720px; margin:32px auto 48px; padding:0 16px; }

    /* ìŠ¤í… ì¹´ë“œ */
    .step-card{
      background:#fff; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,.08);
      padding:24px; margin-bottom:20px;
    }
    .step-card h3{
      margin:0 0 4px; color:var(--brand-600); font-size:1.1rem;
      display:flex; align-items:center; gap:8px;
    }
    .step-num{
      display:inline-flex; align-items:center; justify-content:center;
      width:28px; height:28px; background:var(--brand-600); color:#fff;
      border-radius:50%; font-size:.9rem; font-weight:700;
    }
    .step-desc{ color:#666; margin:0 0 14px; font-size:.95rem; }

    /* ì²´í¬ë°•ìŠ¤ ì•„ì´í…œ */
    .check-item{
      display:flex; align-items:flex-start; gap:10px; padding:10px 12px;
      border-radius:8px; transition:background .15s;
      cursor:pointer; margin-bottom:6px;
    }
    .check-item:hover{ background:#f9fafb; }
    .check-item input[type="checkbox"]{
      margin-top:2px; width:20px; height:20px; cursor:pointer;
    }
    .check-item label{ flex:1; cursor:pointer; }

    /* ê²°ê³¼ íŒ¨ë„ */
    .result-panel{
      background:#fff; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,.08);
      padding:24px; margin-top:24px; text-align:center;
    }
    .result-panel.hidden{ display:none; }
    .result-score{ font-size:3rem; font-weight:700; margin:12px 0; }
    .result-score.safe{ color:#4caf50; }
    .result-score.warn{ color:#ff9800; }
    .result-score.danger{ color:#f44336; }
    .result-msg{ font-size:1.1rem; margin:8px 0 16px; color:#555; }
    .result-actions{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }

    @media (max-width:640px){
      .check-hero{ padding:40px 12px 24px; }
      .step-card{ padding:18px; }
    }
  </style>
</head>
<body>
  {% include '_navbar.html' %}

  <!-- íˆì–´ë¡œ -->
  <section class="check-hero">
    <h1>ğŸ“‹ ì „ì„¸ ê³„ì•½ ìê°€ì§„ë‹¨</h1>
    <p>ì•„ë˜ í•­ëª©ì„ ì²´í¬í•˜ë©´ì„œ ê³„ì•½ ì•ˆì „ë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
  </section>

  <main class="check-main">
    <!-- ìŠ¤í…1: ì„œë¥˜ í™•ì¸ -->
    <article class="step-card">
      <h3><span class="step-num">1</span> í•„ìˆ˜ ì„œë¥˜ í™•ì¸</h3>
      <p class="step-desc">ê³„ì•½ ì „ ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•˜ëŠ” ì„œë¥˜ì…ë‹ˆë‹¤.</p>
      <div class="check-item">
        <input type="checkbox" id="doc1" data-point="10">
        <label for="doc1">ë“±ê¸°ë¶€ë“±ë³¸ì„ í™•ì¸í–ˆê³ , ì†Œìœ ì ì •ë³´ê°€ ê³„ì•½ì„œì™€ ì¼ì¹˜í•œë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="doc2" data-point="10">
        <label for="doc2">ê±´ì¶•ë¬¼ëŒ€ì¥ì—ì„œ ë¶ˆë²• ì¦ì¶•ì´ë‚˜ ìš©ë„ ìœ„ë°˜ì´ ì—†ìŒì„ í™•ì¸í–ˆë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="doc3" data-point="10">
        <label for="doc3">ì„ëŒ€ì¸ ì‹ ë¶„ì¦ê³¼ ì¸ê°ì¦ëª…ì„œë¥¼ ëŒ€ì¡° í™•ì¸í–ˆë‹¤.</label>
      </div>
    </article>

    <!-- ìŠ¤í…2: ì „ì„¸ê°€ìœ¨ -->
    <article class="step-card">
      <h3><span class="step-num">2</span> ì „ì„¸ê°€ìœ¨ ë° ë‹´ë³´ í™•ì¸</h3>
      <p class="step-desc">ë§¤ë§¤ê°€ ëŒ€ë¹„ ì „ì„¸ê°€ ë¹„ìœ¨ê³¼ ë‹´ë³´ ìƒíƒœë¥¼ ì ê²€í•©ë‹ˆë‹¤.</p>
      <div class="check-item">
        <input type="checkbox" id="ratio1" data-point="15">
        <label for="ratio1">ì „ì„¸ê°€ìœ¨ì´ 70% ì´í•˜ë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="ratio2" data-point="10">
        <label for="ratio2">ê·¼ì €ë‹¹/ë‹´ë³´ ì´ì•¡ì´ ë³´ì¦ê¸ˆë³´ë‹¤ í›¨ì”¬ ì ë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="ratio3" data-point="10">
        <label for="ratio3">ì‹¤ê±°ë˜ê°€ì™€ ì‹œì„¸ë¥¼ ë¹„êµí•´ ë§¤ë§¤ê°€ê°€ í•©ë¦¬ì ì´ë‹¤.</label>
      </div>
    </article>

    <!-- ìŠ¤í…3: ë³´í—˜ ë° ëŒ€í•­ë ¥ -->
    <article class="step-card">
      <h3><span class="step-num">3</span> ë³´í—˜Â·ëŒ€í•­ë ¥ í™•ë³´</h3>
      <p class="step-desc">ë³´ì¦ê¸ˆ ë³´í˜¸ë¥¼ ìœ„í•œ ë²•ì  ì¡°ì¹˜ ì—¬ë¶€ì…ë‹ˆë‹¤.</p>
      <div class="check-item">
        <input type="checkbox" id="ins1" data-point="15">
        <label for="ins1">HUG ì „ì„¸ë³´ì¦ë³´í—˜ ê°€ì…ì„ ì™„ë£Œí–ˆê±°ë‚˜ ê°€ì… ê°€ëŠ¥ í™•ì¸í–ˆë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="ins2" data-point="10">
        <label for="ins2">ì „ì…ì‹ ê³ ì™€ í™•ì •ì¼ìë¥¼ ë‹¹ì¼ ì²˜ë¦¬í•  ê³„íšì´ë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="ins3" data-point="5">
        <label for="ins3">ê³„ì•½ê¸ˆì„ ì†Œìœ ì ëª…ì˜ ê³„ì¢Œë¡œ ì†¡ê¸ˆí–ˆë‹¤.</label>
      </div>
    </article>

    <!-- ìŠ¤í…4: ì‹ íƒÂ·ì´ì¤‘ê³„ì•½ ë°©ì§€ -->
    <article class="step-card">
      <h3><span class="step-num">4</span> ì‹ íƒÂ·ì´ì¤‘ê³„ì•½ ì˜ˆë°©</h3>
      <p class="step-desc">ì‹ íƒ ì—¬ë¶€ì™€ ì„ëŒ€ì¸ ì‹ ì›ì„ ì¬í™•ì¸í•©ë‹ˆë‹¤.</p>
      <div class="check-item">
        <input type="checkbox" id="fraud1" data-point="10">
        <label for="fraud1">ë“±ê¸°ë¶€ 'ì„êµ¬'ì— ì‹ íƒ í‘œê¸°ê°€ ì—†ê±°ë‚˜, ì‹ íƒì‚¬ ë™ì˜ì„œë¥¼ ë°›ì•˜ë‹¤.</label>
      </div>
      <div class="check-item">
        <input type="checkbox" id="fraud2" data-point="5">
        <label for="fraud2">í˜„ì¥ì—ì„œ ì‹¤ì œ ê±°ì£¼ìë¥¼ í™•ì¸í–ˆê³ , ì„ëŒ€ì¸ê³¼ ì§ì ‘ ë§Œë‚¬ë‹¤.</label>
      </div>
    </article>

    <!-- ê²°ê³¼ íŒ¨ë„ -->
    <section class="result-panel hidden" id="resultPanel">
      <h2>ì§„ë‹¨ ê²°ê³¼</h2>
      <div class="result-score" id="resultScore">0ì </div>
      <p class="result-msg" id="resultMsg">í•­ëª©ì„ ì²´í¬í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
      <div class="result-actions">
        <a href="{{ url_for('map_page') }}" class="btn">ì•ˆì „ íˆíŠ¸ë§µ ë³´ê¸°</a>
        <a href="{{ url_for('searchscan_page') }}" class="btn btn-outline">ë§¤ë¬¼ ë¶„ì„í•˜ê¸°</a>
        <a href="{{ url_for('about_page') }}" class="btn btn-outline">ì „ë¬¸ê°€ ë¬¸ì˜</a>
      </div>
    </section>

    <div style="margin-top:32px; text-align:center;">
      <button class="btn" onclick="calculate()">ì§„ë‹¨ ê²°ê³¼ ë³´ê¸°</button>
      <button class="btn btn-outline" onclick="resetAll()">ì´ˆê¸°í™”</button>
    </div>
  </main>

  <script>
    const checks = document.querySelectorAll('input[type="checkbox"]');
    const progressFill = document.getElementById('progressFill');
    const resultPanel = document.getElementById('resultPanel');
    const resultScore = document.getElementById('resultScore');
    const resultMsg = document.getElementById('resultMsg');
    const resultActions = document.querySelector('.result-actions');

    // ì§„í–‰ë°” ì—…ë°ì´íŠ¸
    function updateProgress(){
      const checked = document.querySelectorAll('input[type="checkbox"]:checked').length;
      const total = checks.length;
      const percent = (checked / total) * 100;
      progressFill.style.width = percent + '%';
    }
    checks.forEach(c => c.addEventListener('change', updateProgress));

    // ê²°ê³¼ ê³„ì‚° ë° ë§ì¶¤í˜• ì•¡ì…˜ ì œê³µ
    function calculate(){
      let score = 0;
      const checkedItems = [];
      
      checks.forEach(c => { 
        if(c.checked) {
          score += parseInt(c.dataset.point || 0);
          checkedItems.push(c.id);
        }
      });
      
      resultPanel.classList.remove('hidden');
      resultScore.textContent = score + 'ì ';
      
      // í´ë˜ìŠ¤ ì´ˆê¸°í™”
      resultScore.className = 'result-score';
      
      // ì ìˆ˜ë³„ ë©”ì‹œì§€ ë° ì¶”ì²œ ì•¡ì…˜
      let message = '';
      let actions = '';
      
      if(score >= 85){
        // ë§¤ìš° ì•ˆì „ (85ì  ì´ìƒ)
        resultScore.classList.add('safe');
        message = 'âœ… ë§¤ìš° ì•ˆì „í•œ ê³„ì•½ì…ë‹ˆë‹¤!<br>ëŒ€ë¶€ë¶„ì˜ ë¦¬ìŠ¤í¬ë¥¼ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤. ì•ˆì‹¬í•˜ê³  ê³„ì•½ì„ ì§„í–‰í•˜ì„¸ìš”.';
        actions = `
          <a href="{{ url_for('map_page') }}" class="btn">ì£¼ë³€ ì§€ì—­ ì•ˆì „ë„ í™•ì¸</a>
          <a href="{{ url_for('faq_page') }}" class="btn btn-outline">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a>
        `;
      } else if(score >= 70){
        // ì•ˆì „ (70-84ì )
        resultScore.classList.add('safe');
        message = 'âœ… ì•ˆì „í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.<br>ì¼ë¶€ í•­ëª©ì„ ì¶”ê°€ í™•ì¸í•˜ë©´ ë”ìš± ì•ˆì „í•©ë‹ˆë‹¤.';
        actions = `
          <a href="{{ url_for('scam_types_page') }}" class="btn">ì „ì„¸ì‚¬ê¸° ìœ í˜• í™•ì¸</a>
          <a href="{{ url_for('searchscan_page') }}" class="btn btn-outline">ë§¤ë¬¼ ë¶„ì„í•˜ê¸°</a>
        `;
      } else if(score >= 50){
        // ì£¼ì˜ í•„ìš” (50-69ì )
        resultScore.classList.add('warn');
        message = 'âš ï¸ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.<br>ì²´í¬í•˜ì§€ ì•Šì€ í•­ëª©ì„ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”. íŠ¹íˆ ì„œë¥˜ í™•ì¸ê³¼ ë³´í—˜ ê°€ì…ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.';
        actions = `
          <a href="{{ url_for('scam_types_page') }}" class="btn">ì „ì„¸ì‚¬ê¸° ì˜ˆë°©ë²• ë³´ê¸°</a>
          <a href="{{ url_for('about_page') }}" class="btn">ì „ë¬¸ê°€ ìƒë‹´ ì‹ ì²­</a>
          <a href="{{ url_for('searchscan_page') }}" class="btn btn-outline">ë§¤ë¬¼ ìœ„í—˜ë„ ë¶„ì„</a>
        `;
      } else if(score >= 30){
        // ìœ„í—˜ (30-49ì )
        resultScore.classList.add('danger');
        message = 'ğŸš¨ ìœ„í—˜ ìˆ˜ì¤€ì…ë‹ˆë‹¤.<br>ê³„ì•½ ì „ ë°˜ë“œì‹œ ì „ë¬¸ê°€ ìƒë‹´ì„ ë°›ìœ¼ì‹œê³ , ë¯¸í™•ì¸ í•­ëª©ì„ ëª¨ë‘ ì ê²€í•˜ì„¸ìš”.';
        actions = `
          <a href="{{ url_for('about_page') }}" class="btn">ê¸´ê¸‰ ì „ë¬¸ê°€ ìƒë‹´</a>
          <a href="{{ url_for('scam_types_page') }}" class="btn btn-outline">ì‚¬ê¸° ìœ í˜• í•™ìŠµ</a>
          <a href="tel:1899-5075" class="btn btn-outline">HUG ìƒë‹´ì „í™”</a>
        `;
      } else {
        // ë§¤ìš° ìœ„í—˜ (30ì  ë¯¸ë§Œ)
        resultScore.classList.add('danger');
        message = 'ğŸš¨ğŸš¨ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤!<br>í˜„ì¬ ìƒíƒœë¡œ ê³„ì•½í•˜ë©´ ë³´ì¦ê¸ˆ í”¼í•´ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ì „ë¬¸ê°€ ìƒë‹´ì„ ë°›ìœ¼ì„¸ìš”.';
        actions = `
          <a href="{{ url_for('about_page') }}" class="btn" style="background:#f44336;">ê¸´ê¸‰ ìƒë‹´ ì‹ ì²­</a>
          <a href="tel:1899-5075" class="btn">HUG ì „í™” ìƒë‹´</a>
          <a href="https://www.easylaw.go.kr" target="_blank" class="btn btn-outline">ë²•ë¥  ì§€ì› ì°¾ê¸°</a>
        `;
      }
      
      resultMsg.innerHTML = message;
      resultActions.innerHTML = actions;
      
      // ê²°ê³¼ íŒ¨ë„ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
      window.scrollTo({ top: resultPanel.offsetTop - 80, behavior: 'smooth' });
      
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì ìˆ˜ ì €ì¥ (ì„ íƒì‚¬í•­)
      localStorage.setItem('lastCheckScore', score);
      localStorage.setItem('lastCheckDate', new Date().toISOString());
    }

    // ì´ˆê¸°í™”
    function resetAll(){
      if(confirm('ëª¨ë“  ì²´í¬ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
        checks.forEach(c => c.checked = false);
        updateProgress();
        resultPanel.classList.add('hidden');
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ì „ ì ìˆ˜ í‘œì‹œ (ì„ íƒì‚¬í•­)
    window.addEventListener('DOMContentLoaded', function(){
      const lastScore = localStorage.getItem('lastCheckScore');
      const lastDate = localStorage.getItem('lastCheckDate');
      if(lastScore && lastDate){
        const date = new Date(lastDate);
        const days = Math.floor((Date.now() - date) / (1000*60*60*24));
        if(days <= 7){
          console.log(`ìµœê·¼ ì§„ë‹¨: ${lastScore}ì  (${days}ì¼ ì „)`);
        }
      }
    });
  </script>
</body>
</html>